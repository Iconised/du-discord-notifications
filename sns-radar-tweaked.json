{"slots":{"0":{"name":"radar_1","type":{"events":[],"methods":[]}},"1":{"name":"screen","type":{"events":[],"methods":[]}},"2":{"name":"button","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot5","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-3":{"name":"player","type":{"events":[],"methods":[]}},"-2":{"name":"construct","type":{"events":[],"methods":[]}},"-4":{"name":"system","type":{"events":[],"methods":[]}},"-5":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"system.print(\"New Ship on radar : \"..id)\nalarm.lastid=id\nalarm.timer=3\nsystem.playSound(\"SleimHud/newContact.mp3\")","filter":{"args":[{"variable":"*"}],"signature":"onEnter(id)","slotKey":"0"},"key":"0"},{"code":"system.playSound(\"SleimHud/targetleft.mp3\")","filter":{"args":[{"variable":"*"}],"signature":"onLeave(id)","slotKey":"0"},"key":"1"},{"code":"alarm.color = \"\"\nscreen.setCenteredText(screenBlankName)","filter":{"args":[],"signature":"onPressed()","slotKey":"2"},"key":"2"},{"code":"alarm={}\nalarm.timer=0\nalarm.lastid=0\nalarm.color=\"red\"\n\nshowRadar = true --export:\nscreenBlankName = \"\" --export:\n\nkSkipCharSet = { [\"O\"] = true, [\"Q\"] = true, [\"0\"] = true }\nkCharSet = {}\naddRangeToCharSet(48, 57) -- 0 - 9\naddRangeToCharSet(65, 90) -- A - Z\nkCharSetSize = #kCharSet\n\nunit.setTimer(\"ScoutHUD\", 0.8)\n\nsystem.showScreen(1)\n\n--alarm.color=\"\"\nif showRadar then\nradar_1.showWidget()\n    end\nalarm.color = \"\"\n\nrs_black = 'setBackgroundColor(0, 0, 0)'","filter":{"args":[],"signature":"start()","slotKey":"-1"},"key":"3"},{"code":"local XScreenRes=system.getScreenWidth()\nlocal YScreenRes=system.getScreenHeight()\nalarm.timer=10\nsvgship=[[\n        <style>\n            .wpsvg {\n                position:absolute;\n                left: 0;\n                top: 0;\n                height: 100vh;\n                width: 100vw;}\n        </style>\n        <svg class=\"wpsvg\">\n        ]]\n\nif alarm.timer > 0 then\n    svgship = svgship..[[<rect x=\"7\" y=\"7\" width=\"]].. XScreenRes-15 ..[[\" height=\"]].. YScreenRes-15 ..[[\" stroke=\"]]..alarm.color..[[\" stroke-width=\"15\" fill=\"transparent\" />]]\nend\n\nsvgship = svgship..\"</svg>\"\n\n\nsvgscreen=\"<svg>\"\nif alarm.timer > 0 then\n    svgscreen = svgscreen..[[<rect x=\"7\" y=\"7\" width=\"]].. XScreenRes-15 ..[[\" height=\"]].. YScreenRes-15 ..[[\" stroke=\"]]..alarm.color..[[\" stroke-width=\"15\" fill=\"transparent\" />]]\nend\nsvgscreen = svgscreen..\"</svg>\"\n--screen.setSVG(svgscreen)\n\n\n\n\n\n\nif system.getMouseDeltaX()~=0 or system.getMouseDeltaX()~=0 then\n    alarm.timer=alarm.timer-1\nend\n\nsystem.setScreen(svgship)","filter":{"args":[{"value":"ScoutHUD"}],"signature":"tick(timerId)","slotKey":"-1"},"key":"4"},{"code":"system.showScreen(0)\nscreen.setRenderScript(rs_black) --black screen on stop","filter":{"args":[],"signature":"stop()","slotKey":"-1"},"key":"5"},{"code":"--Get ship info after radar EVENT_enter\nGetShipInfo(alarm.lastid)","filter":{"args":[],"signature":"update()","slotKey":"-4"},"key":"6"},{"code":"function convertSectoDay(n)\n    local day = math.floor(n / (24*3600))\n    n = n % (24 * 3600)\n    local hour = math.floor(n / 3600)\n    n = n % 3600\n    local minutes = math.floor(n / 60)\n    n = n % 60\n    local seconds = math.floor(n)\n    --\n    return day, hour, minutes, seconds\nend\n\nfunction addRangeToCharSet(a, b)\n    for i=a,b do\n        local c = string.char(i)\n        if not kSkipCharSet[c] then\n            kCharSet[#kCharSet+1] = c\n        end\n    end\nend\n\nfunction getHash(x)\n    x = ((x >> 16) ~ x) * 0x45d9f3b\n    x = ((x >> 16) ~ x) * 0x45d9f3b\n    x = (x >> 16) ~ x\n    if x < 0 then x = ~x end\n    return x\nend\n\nfunction getShortName(id)\n    local seed = getHash(id)%8388593\n    local a = (seed*653276)%8388593\n    local b = (a*653276)%8388593\n    local c = (b*653276)%8388593\n    return kCharSet[a%kCharSetSize+1] .. kCharSet[b%kCharSetSize+1] .. kCharSet[c%kCharSetSize+1]\nend\n\n-- function to get ship information\nfunction GetShipInfo(ShipID)\n    if ShipID>0 then\n        --Get Ship NAME / SIZE\n        alarm.color=\"red\"\n        local name=radar_1.getConstructName(ShipID)\n        local size=radar_1.getConstructSize(ShipID)[1]\n        if size==32 then size=\"Xs\"\n        elseif size==64 then size=\"S\"\n        elseif size==128 then size=\"M\"\n        elseif size==256 then size=\"L\"\n    end\n    local etype=\"Ship : \"\n    if radar_1.isConstructAbandoned(ShipID)==1 then\n        etype=\"Abandoned : \"\n    else\n    if radar_1.hasMatchingTransponder(ShipID)==1 then\n        alarm.color=\"lightseagreen\"\n        etype = \"Ally : \"\n    end                        \n    end\n    local newshipinfo=etype..\"(\"..getShortName(ShipID)..\") \"..ShipID..\" Name : \"..name..\" size : \"..size..\" at \".. system.getWaypointFromPlayerPos()\n    local days, hours, minutes, seconds = convertSectoDay(system.getTime())\n    system.print(string.format(\"%02d:%02d:%02d\",hours,minutes,seconds)..\" \"..newshipinfo)\n    if screen~=nil then\n        screen.setCenteredText(string.format(\"%02d:%02d:%02d\",hours,minutes,seconds)..\" \"..newshipinfo)\n    end\n    alarm.lastid=0\n    end\nend","filter":{"args":[],"signature":"start()","slotKey":"-5"},"key":"7"}],"methods":[],"events":[]}
